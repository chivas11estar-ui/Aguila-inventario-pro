<!DOCTYPE html>
<html lang="es-MX" dir="ltr">
<head>
  <!-- ============================================================
       Ãguila Inventario Pro
       Copyright Â© 2025 JosÃ© A. G. Betancourt
       ============================================================ -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#004aad">
  <meta name="description" content="Sistema profesional de inventario para promotores con escÃ¡ner, auditorÃ­a y modo offline">

  <title>ğŸ¦… Ãguila Inventario Pro</title>

  <!-- ======================= PWA ======================= -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">
  <link rel="apple-touch-icon" href="icon-192x192.png">

  <!-- ======================= ESTILOS ======================= -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="custom-styles.css">

  <!-- ======================= FIREBASE (COMPAT) ======================= -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- ======================= CONFIG ======================= -->
  <script src="firebase-config.js"></script>
</head>

<body>

<!-- ============================================================
     TOASTS
     ============================================================ -->
<div id="app-toast-container"></div>

<!-- ============================================================
     MODAL ESCÃNER
     ============================================================ -->
<div id="scanner-modal" class="scanner-modal hidden">
  <div class="scanner-container">
    <header class="scanner-header">ğŸ“· EscÃ¡ner de CÃ³digo</header>
    <video id="scanner-video" autoplay playsinline></video>
    <div class="scanner-frame"></div>
    <button id="close-scanner" class="scanner-close-btn">Cerrar</button>
  </div>
</div>

<!-- ============================================================
     AUTH
     ============================================================ -->
<section id="auth-setup" class="card auth-card">
  <h2>ğŸ¦… Ãguila Inventario Pro</h2>

  <form id="login-form">
    <input id="login-email" type="email" placeholder="Correo" required>
    <input id="login-password" type="password" placeholder="ContraseÃ±a" required>
    <button type="button" id="btn-login" class="primary">Entrar</button>
    <p><a href="#" id="show-register">Crear cuenta</a></p>
  </form>

  <form id="register-form" class="hidden">
    <input id="register-email" type="email" placeholder="Correo" required>
    <input id="register-password" type="password" placeholder="ContraseÃ±a" required>
    <input id="register-determinante" placeholder="Determinante" required>
    <input id="register-store-name" placeholder="Tienda" required>
    <input id="register-promoter-name" placeholder="Promotor" required>
    <button type="submit" class="success">Registrar</button>
    <p><a href="#" id="show-login">Ya tengo cuenta</a></p>
  </form>
</section>

<!-- ============================================================
     APP PRINCIPAL
     ============================================================ -->
<section id="app-container" class="hidden">

  <!-- ======================= HEADER ======================= -->
  <header class="app-header">
    <h1>ğŸ¦… Ãguila Inventario Pro</h1>
    <button id="btn-logout">ğŸšª</button>
  </header>

  <!-- ======================= NAV ======================= -->
  <nav class="bottom-nav">
    <a data-tab="inventory" class="active">ğŸ“¦</a>
    <a data-tab="add">â•</a>
    <a data-tab="refill">ğŸ”„</a>
    <a data-tab="audit">âœ“</a>
    <a data-tab="analytics">ğŸ“Š</a>
    <a data-tab="system">âš™ï¸</a>
  </nav>

  <!-- ======================= CONTENT ======================= -->
  <main class="main-content">

    <!-- INVENTARIO -->
    <section id="tab-inventory" class="tab-content active">
      <h2>Inventario</h2>
      <div id="inventory-list"></div>
    </section>

    <!-- AGREGAR -->
    <section id="tab-add" class="tab-content hidden">
      <h2>Agregar producto</h2>
      <input id="add-barcode" placeholder="CÃ³digo">
      <button id="btn-scan-add">ğŸ“·</button>
      <input id="add-product-name" placeholder="Nombre">
      <input id="add-brand" placeholder="Marca">
      <input id="add-pieces-per-box" type="number" placeholder="Piezas">
      <input id="add-warehouse" placeholder="Bodega">
      <input id="add-expiry-date" type="date">
      <input id="add-boxes" type="number" placeholder="Cajas">
      <button id="save-add-product" class="primary">Guardar</button>
    </section>

    <!-- RELLENO -->
    <section id="tab-refill" class="tab-content hidden">
      <h2>Relleno</h2>
      <input id="refill-barcode" placeholder="CÃ³digo">
      <button id="btn-scan-refill">ğŸ“·</button>
      <input id="refill-nombre" readonly>
      <input id="refill-marca" readonly>
      <input id="refill-piezas" readonly>
      <input id="refill-boxes" type="number" placeholder="Cajas movidas">
      <button id="save-refill" class="primary">Registrar</button>
    </section>

    <!-- AUDITORÃA -->
    <section id="tab-audit" class="tab-content hidden">
      <h2>AuditorÃ­a</h2>
      <input id="audit-barcode" placeholder="CÃ³digo">
      <button id="btn-scan-audit">ğŸ“·</button>
      <input id="audit-nombre" readonly>
      <input id="audit-boxes" type="number">
      <button id="save-audit" class="primary">Guardar</button>
    </section>

    <!-- ANALYTICS -->
    <section id="tab-analytics" class="tab-content hidden">
      <h2>Analytics</h2>
      <div id="weekly-chart-container"></div>
      <div id="monthly-chart-container"></div>
    </section>

    <!-- SISTEMA -->
    <section id="tab-system" class="tab-content hidden">
      <h2>Sistema</h2>
      <button id="btn-diagnostico">DiagnÃ³stico</button>
      <button id="btn-stats">EstadÃ­sticas</button>
      <button id="btn-clear-data">Limpiar datos</button>
      <button id="btn-logout-settings">Cerrar sesiÃ³n</button>
    </section>

  </main>
</section>

<!-- ============================================================
     FOOTER (NO SE TOCA)
     ============================================================ -->
<footer style="background:var(--card-bg);text-align:center;border-top:2px solid var(--border);margin-top:40px;">
  <p style="margin:5px 0;font-weight:600;">Ãguila Inventario Pro v7.8</p>
  <p style="margin:5px 0;color:var(--muted);font-size:18px;">
    &copy; 2025 JosÃ© A. G. Betancourt - Todos los derechos reservados
  </p>
</footer>

<!-- ============================================================
     SCRIPTS â€” ORDEN CRÃTICO
     ============================================================ -->
<script src="ui.js"></script>
<script src="auth.js"></script>
<script src="inventory.js"></script>
<script src="refill-enhanced.js"></script>
<script src="analytics.js"></script>
<script src="audit.js"></script>
<script src="scanner-mlkit.js"></script>
<script src="scanner-events.js"></script>
<script src="system.js"></script>
<script src="system-events.js"></script>
<script src="app.js"></script>

<!-- ============================================================
     SERVICE WORKER
     ============================================================ -->
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('âœ… Service Worker activo'))
    .catch(console.error);
}
</script>

</body>
</html>
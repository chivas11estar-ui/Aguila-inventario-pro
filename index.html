<!DOCTYPE html>
<html lang="es">
<head>
  <!-- ========================================================= -->
  <!-- Ãguila Inventario Pro                                    -->
  <!-- Copyright Â© 2025 JosÃ© A. G. Betancourt                    -->
  <!-- ========================================================= -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#004aad">

  <title>ğŸ¦… Ãguila Inventario Pro</title>
  <meta name="description" content="Sistema profesional de inventario para promotores con escÃ¡ner y modo offline.">

  <!-- ======================= PWA ======================= -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192x192.png">
  <link rel="apple-touch-icon" href="icon-512x512.png">

  <!-- ======================= ESTILOS ======================= -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="custom-styles.css">

  <!-- ======================= FIREBASE (COMPAT) ======================= -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script src="firebase-config.js"></script>
</head>

<body>

<!-- ========================================================= -->
<!-- SIDEBAR OVERLAY                                          -->
<!-- ========================================================= -->
<div id="sidebar-overlay"></div>

<!-- ========================================================= -->
<!-- SIDEBAR                                                  -->
<!-- ========================================================= -->
<aside id="sidebar">
  <div class="sidebar-header">
    <h2>ğŸ¦… Ãguila Pro</h2>
  </div>

  <nav class="sidebar-nav">
    <a href="#" data-tab="inventario" class="active">ğŸ“¦ Inventario</a>
    <a href="#" data-tab="agregar">â• Agregar</a>
    <a href="#" data-tab="relleno">ğŸ”„ Relleno</a>
    <a href="#" data-tab="auditoria">âœ“ AuditorÃ­a</a>
    <a href="#" data-tab="sistema">âš™ï¸ Sistema</a>
    <hr>
    <a href="#" id="btn-logout">ğŸšª Cerrar sesiÃ³n</a>
  </nav>
</aside>

<!-- ========================================================= -->
<!-- APP CONTAINER (âš ï¸ NO OCULTO POR DEFECTO)                 -->
<!-- ========================================================= -->
<div id="app-container" class="app-container">

  <!-- ======================= HEADER ======================= -->
  <header class="app-header">
    <button id="menu-toggle">â˜°</button>
    <h1>Ãguila Inventario Pro</h1>

    <div class="status-indicator status-online">
      <span id="connection-status-text">Conectado</span>
    </div>
  </header>

  <!-- ======================= MAIN ======================= -->
  <main class="app-main">

    <!-- INVENTARIO -->
    <section id="tab-inventario" class="tab-content active">
      <h2>ğŸ“¦ Inventario</h2>
      <input id="inventory-search" placeholder="Buscar producto...">
      <div id="inventory-container"></div>
    </section>

    <!-- AGREGAR -->
    <section id="tab-agregar" class="tab-content hidden">
      <h2>â• Agregar Producto</h2>

      <button class="scanner-btn" data-scan-context="agregar">ğŸ“· Escanear</button>

      <form id="form-agregar-producto">
        <input id="agregar-codigo" placeholder="CÃ³digo" required>
        <input id="agregar-nombre" placeholder="Nombre" required>
        <input id="agregar-marca" placeholder="Marca" required>
        <input id="agregar-piezas" type="number" placeholder="Piezas por caja" required>
        <input id="agregar-cajas" type="number" placeholder="Cajas" required>
        <input id="agregar-ubicacion" placeholder="Bodega" required>
        <input id="agregar-caducidad" type="date" required>
        <button type="submit">ğŸ’¾ Guardar</button>
      </form>
    </section>

    <!-- RELLENO -->
    <section id="tab-relleno" class="tab-content hidden">
      <h2>ğŸ”„ Relleno</h2>
      <button class="scanner-btn" data-scan-context="relleno">ğŸ“· Escanear</button>

      <form id="form-relleno">
        <input id="relleno-codigo" placeholder="CÃ³digo" required>
        <input id="relleno-nombre" placeholder="Nombre">
        <input id="relleno-marca" placeholder="Marca">
        <input id="relleno-piezas" type="number" placeholder="Piezas por caja">
        <input id="relleno-cajas" type="number" placeholder="Cajas movidas" required>
        <input id="relleno-caducidad" type="date" required>
        <button type="submit">ğŸ“¦ Registrar</button>
      </form>
    </section>

    <!-- AUDITORÃA -->
    <section id="tab-auditoria" class="tab-content hidden">
      <h2>âœ“ AuditorÃ­a</h2>
      <select id="audit-bodega-select"></select>
      <button class="scanner-btn" data-scan-context="auditoria">ğŸ“· Escanear</button>
      <div id="audit-list"></div>
    </section>

    <!-- SISTEMA -->
    <section id="tab-sistema" class="tab-content hidden">
      <h2>âš™ï¸ Sistema</h2>
      <button id="btn-diagnostico">ğŸ” DiagnÃ³stico</button>
      <button id="btn-stats">ğŸ“Š EstadÃ­sticas</button>
      <button id="btn-clear-data">ğŸ—‘ï¸ Limpiar datos</button>
    </section>

  </main>
</div>

<!-- ========================================================= -->
<!-- FOOTER                                                   -->
<!-- ========================================================= -->
<footer style="text-align:center;padding:16px;border-top:1px solid #ddd;">
  <p><strong>Ãguila Inventario Pro v7.8</strong></p>
  <p>&copy; 2025 JosÃ© A. G. Betancourt</p>
</footer>

<!-- ========================================================= -->
<!-- SCRIPTS (ORDEN CORRECTO)                                 -->
<!-- ========================================================= -->
<script src="ui.js"></script>
<script src="auth.js"></script>
<script src="app.js"></script>
<script src="inventory.js"></script>
<script src="inventory-enhanced.js"></script>
<script src="refill-enhanced.js"></script>
<script src="audit.js"></script>
<script src="system.js"></script>
<script src="system-events.js"></script>
<script src="scanner-mlkit.js"></script>
<script src="scanner-events.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
</script>

</body>
</html>
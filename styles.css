// ============================================================
// Ãguila Inventario Pro - MÃ³dulo: style.css
// Copyright Â© 2025 JosÃ© A. G. Betancourt
// ... (Encabezado) ...
// ============================================================


console.log('ğŸš€ Iniciando Ãguila Inventario Pro v7.1...');

// ============================================================
// VERIFICAR DEPENDENCIAS
// ============================================================
function checkDependencies() {
  const dependencies = {
    firebase: typeof firebase !== 'undefined' && firebase.apps.length > 0, // Verificar inicializaciÃ³n
    showToast: typeof showToast === 'function',
    openScanner: typeof openScanner === 'function',
  };
  
  console.log('ğŸ“¦ Dependencias verificadas:', dependencies);
  
  const allLoaded = Object.values(dependencies).every(dep => dep);
  
  if (!allLoaded) {
    console.warn('âš ï¸ Algunas dependencias no estÃ¡n cargadas:', dependencies);
  }
  
  return allLoaded;
}

// ============================================================
// INICIALIZACIÃ“N DE LA APLICACIÃ“N
// ============================================================
function initializeApp() {
  console.log('âš™ï¸ Inicializando aplicaciÃ³n principal...');
  
  // No necesitamos llamar initFirebase aquÃ­, ya que firebase-config.js lo hizo.
  
  if (!firebase.apps || firebase.apps.length === 0) {
    console.error('âŒ Firebase no estÃ¡ inicializado. Fallo de sincronizaciÃ³n de scripts.');
    // Usamos showToast si estÃ¡ disponible
    if (typeof showToast !== 'undefined') {
        showToast('Error: Firebase no estÃ¡ inicializado. Recarga la pÃ¡gina.', 'error');
    }
    return;
  }
  
  console.log('âœ… Firebase inicializado correctamente (verificado en app.js)');
  console.log('ğŸ“± Apps de Firebase:', firebase.apps.length);
  
  // El resto de la inicializaciÃ³n se maneja en auth.js
  // cuando el usuario se autentica
  
  checkDependencies();
}

// ============================================================
// ESPERAR A QUE TODO ESTÃ‰ CARGADO
// ============================================================
window.addEventListener('load', () => {
  console.log('ğŸ¨ PÃ¡gina completamente cargada');
  
  // Llamamos a initializeApp inmediatamente. El uso de DEFER en index.html garantiza 
  // que el DOM estÃ¡ listo y que firebase-config.js ya terminÃ³ su trabajo.
  initializeApp(); 
});

// ============================================================
// MANEJO DE ERRORES GLOBALES
// ============================================================
window.addEventListener('error', (event) => {
  console.error('âŒ Error global capturado:', event.error);
});

window.addEventListener('unhandledrejection', (event) => {
  console.error('âŒ Promise rechazada sin manejar:', event.reason);
});

// ============================================================
// INFORMATION
// ============================================================
console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                           â•‘
â•‘       ğŸ¦… ÃGUILA INVENTARIO PRO v7.1                      â•‘
â•‘                                                           â•‘
â•‘       Sistema de GestiÃ³n de Inventario                   â•‘
â•‘       para Promotores PepsiCo                            â•‘
â•‘                                                           â•‘
â•‘       Â© 2025 JosÃ© A. G. Betancourt                       â•‘
â•‘       Todos los derechos reservados                      â•‘
â•‘                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ MÃ³dulos cargados:
   âœ… firebase-config.js
   âœ… auth.js
   âœ… ui.js
   âœ… inventory.js
   âœ… refill.js
   âœ… audit.js
   âœ… system.js
   âœ… app.js

ğŸ”¥ Firebase: Conectado
ğŸ“± Modo: ProducciÃ³n
ğŸŒ Entorno: Web App

Para soporte o reportar bugs:
ğŸ“§ Email: soporte@aguilainventario.com
`);

console.log('âœ… app.js cargado correctamente');